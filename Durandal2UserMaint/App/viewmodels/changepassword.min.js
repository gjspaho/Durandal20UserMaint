define(["durandal/app","services/logger","services/dataservice","plugins/router","models/changePasswordModel","jquery","services/navigating"],function(n,t,i,r,u,f,e){var o=ko.observable(),s=function(){o(u);return},h=function(){var n=f("#myPasswordForm");n.validate({invalidHandler:function(n,i){t.log("in invalidHandler");var r=i.numberOfInvalids(),u=r==1?"There is 1 field in error. Please verify the highlighted field":"There are "+r+" in error. Please verify the highlighted fields";i.errorList[0].element.focus(),t.logError(u,null,null,!0)},rules:{oldPassword:{required:!0},newPassword:{required:!0,minlength:6},confirmPassword:{required:!0,equalTo:"#newPassword"}},messages:{oldPassword:{required:"The Old Password is Required"},newPassword:{required:"The New Password is required",minlength:"New password must be at last 6 characters long"},confirmPassword:{required:"The Confirmation Password is required",equalTo:"The Confirmation Password doesn't match"}}})},c=function(){var u=f("#myPasswordForm"),n;if(u.valid())return e.busy(!0),n=i.changePassword(o),n.then(function(){t.log("Your password was changed",null,"sendChangePassword",!0),o().oldPassword(""),o().newPassword(""),o().confirmPassword(""),e.busy(!1),r.navigateBack()}).fail(function(n){t.logError("Error while changing your password: "+n.responseJSON.ExceptionMessage,null,"sendChangePassword",!0),e.busy(!1)})};return{title:"Change Password",description:"Enter your Old Password as well as your New One.",activate:s,passwordModel:o,sendChangePassword:c,attached:h}});
//@ sourceMappingURL=changepassword.min.js.map