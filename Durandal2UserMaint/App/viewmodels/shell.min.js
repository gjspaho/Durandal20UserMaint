define(["durandal/system","plugins/router","durandal/app","services/logger","services/dataservice","knockout","services/navigating","services/scripts"],function(n,t,i,r,u,f,e,o){function a(){var n=[];return n.push({route:"",title:"Welcome",moduleId:"viewmodels/welcome",type:"main",nav:!0}),n.push({route:"flickr",title:"flickr",moduleId:"viewmodels/flickr",type:"main",nav:!0}),n.push({route:"changepassword",title:"Change Password",moduleId:"viewmodels/changepassword",type:"admin",nav:!0}),o.visibleBasedOnUserRole(["Administrator"])&&n.push({route:"viewusers",title:"View Users",moduleId:"viewmodels/viewusers",type:"admin",nav:!0}),o.visibleBasedOnUserRole(["Administrator"])&&n.push({route:"viewroles",title:"View Roles",moduleId:"viewmodels/viewroles",type:"admin",nav:!0}),n.push({route:"logoff",title:"Log Off",moduleId:"viewmodels/logoff",type:"admin",nav:!0}),n}var s=function(){e.busy(!0);var n=u.getUserRole();return n.then(function(){return r.log("Portal activated",null,null,!0),t.map(a()).buildNavigationModel(),e.busy(!1),t.activate()}).fail(function(n){return r.logError("Cannot load portal.<br/>"+n.responseJSON.ExceptionMessage,"Cannot load portal",null,!0),e.busy(!1),n})},h=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="main"})}),c=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="admin"})}),l=function(){r.log("Search not yet implemented",null,null,!0)};return{activate:s,router:t,search:l,mainMenu:h,adminMenu:c,showBusy:e.showBusy}});
//@ sourceMappingURL=shell.min.js.map