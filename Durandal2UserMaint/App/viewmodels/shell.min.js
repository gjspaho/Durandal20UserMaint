define(["durandal/system","plugins/router","durandal/app","services/logger","services/dataservice","knockout","services/navigating"],function(n,t,i,r,u,f,e){function l(){var n=[];return n.push({route:"",title:"Welcome",moduleId:"viewmodels/welcome",type:"main",nav:!0}),n.push({route:"flickr",title:"flickr",moduleId:"viewmodels/flickr",type:"main",nav:!0}),n.push({route:"changepassword",title:"Change Password",moduleId:"viewmodels/changepassword",type:"admin",nav:!0}),n.push({route:"logoff",title:"Log Off",moduleId:"viewmodels/logoff",type:"admin",nav:!0}),n}var o=function(){e.busy(!0);var n=u.getUserRole();return n.then(function(){return r.log("Portal activated",null,null,!0),t.map(l()).buildNavigationModel(),e.busy(!1),t.activate()}).fail(function(n){return r.logError("Cannot load portal.<br/>"+n.responseJSON.ExceptionMessage,"Cannot load portal",null,!0),e.busy(!1),n})},s=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="main"})}),h=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="admin"})}),c=function(){r.log("Search not yet implemented",null,null,!0)};return{activate:o,router:t,search:c,mainMenu:s,adminMenu:h,showBusy:e.showBusy}});
//@ sourceMappingURL=shell.min.js.map