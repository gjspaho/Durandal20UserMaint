define(["durandal/system","plugins/router","durandal/app","services/logger","services/dataservice","knockout"],function(n,t,i,r,u,f){function c(){var n=[];return n.push({route:"",title:"Welcome",moduleId:"viewmodels/welcome",type:"main",nav:!0}),n.push({route:"flickr",title:"flickr",moduleId:"viewmodels/flickr",type:"main",nav:!0}),n.push({route:"changepassword",title:"Change Password",moduleId:"viewmodels/changepassword",type:"admin",nav:!0}),n.push({route:"logoff",title:"Log Off",moduleId:"viewmodels/logoff",type:"admin",nav:!0}),n}var e=function(){var n=u.getUserRole();return n.then(function(){return r.log("Portal activated",null,null,!0),t.map(c()).buildNavigationModel(),t.activate()}).fail(function(n){r.logError("Cannot load portal.<br/>"+n.responseJSON.ExceptionMessage,"Cannot load portal",null,!0)})},o=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="main"})}),s=f.computed(function(){return f.utils.arrayFilter(t.navigationModel(),function(n){return n.type=="admin"})}),h=function(){r.log("Search not yet implemented",null,null,!0)};return{activate:e,router:t,search:h,mainMenu:o,adminMenu:s}});
//@ sourceMappingURL=shell.min.js.map